<div id="container">
    <!-- <div id="side-container">

    </div> -->
    <div id="menu-container">
        <h2>Основная таблица</h2>
        <p>Для выгрузки файла отфильтруйте список должностей, нажмите “выгрузить должности с требованиями”</p>
        <div [formGroup]="inputForm">
            <tui-text-area
                formControlName="inputValue"
                class="field-filter field-medium"
                [expandable]="true"
                [maxLength]="30"
                [(ngModel)]="searchText"
            >  
                <tui-svg src="tuiIconSearch"></tui-svg>
                Введите текст
            </tui-text-area>
        </div>

        <div class="btn-container">
            <button
            tuiButton
            type="button"
            appearance="primary"
            class="tui-space_right-3 tui-space_bottom-3 btn"
            >
            Сортировка
            </button>
            
            <!-- <button type="button" class="btn-my">
                Выгрузить должности
            </button> -->
                
            <button

            tuiButton
            type="button"
            appearance="primary"
            class="tui-space_right-3 tui-space_bottom-3 btn"
            (click)="exportUsers()"
            >
            Выгрузить должности
            </button>
        </div>
        
            <table
            tuiTable
            [columns]="columns"
            class="table-container "
            #tableOfUsers
            id="table"
            >
            <thead>
                <tr tuiThGroup>
                    <th
                        *tuiHead="'id'"
                        tuiTh
                        (click)="sortData()"
                    >
                        Id
                    </th>
                    <th
                        *tuiHead="'name'"
                        tuiTh
                        (click)="sortData()"
                    >
                        Наименование должности
                    </th>
                    <th
                        *tuiHead="'postName'"
                        tuiTh
                        (click)="sortData()"
                    >
                        Категория должности
                    </th>
                    <th
                        *tuiHead="'structuralDivision'"
                        tuiTh
                        [sorter]="null"
                        (click)="sortData()"
                    >
                       Структурное подразделение
                    </th>
                    <th
                        *tuiHead="'balanceUnit'"
                        tuiTh
                        [sorter]="null"
                        (click)="sortData()"
                    >
                       Балансовая единица
                    </th>
                    <th
                        *tuiHead="'manageLevel'"
                        tuiTh
                        [sorter]="null"
                        (click)="sortData()"
                    >
                       Уровень управления
                    </th>
                    <th
                        *tuiHead="'grade'"
                        tuiTh
                        [sorter]="null"
                        (click)="sortData()"
                    >
                       Грейд
                    </th>
                    <th
                    *tuiHead="'areOfWork'"
                    tuiTh
                    [sorter]="null"
                    (click)="sortData()"
                    >
                    Область деятельности
                    </th>
                    <th
                    *tuiHead="'actions'"
                    tuiTh
                    [sorter]="null"
                    (click)="sortData()"
                    >
                    Действия
                    </th>
                </tr>
            </thead>
            <tbody
                *tuiLet="post | tuiTableSort as sortedPosts"
                tuiTbody
                [data]="sortedPosts"
            >
                <tr
                    *ngFor="let item of sortedPosts | search: searchText | paginate: {itemsPerPage: 5, currentPage: p}; let index = index"
                    tuiTr
                >
                    <td
                        *tuiCell="'id'"
                        tuiTd
                    >
                        {{ index + 1 }}. {{ item.id }}
                    </td>
                    <td
                        *tuiCell="'name'"
                        tuiTd
                    >   
                        <div [class]="item.name">{{ item.name }}</div>
                        <!-- <a
                            *ngIf="item.role"
                            tuiLink
                            [href]="'mailto:' + item.role"
                        >
                            {{ item.role }}
                        </a> -->
                    </td>
                    <td
                        *tuiCell="'postName'"
                        tuiTd
                    >
                        <div [class]="item.postName">{{ item.postName }}</div>
                    </td>
                    <td
                        *tuiCell="'structuralDivision'"
                        tuiTd
                    >   
                        <div [class]="item.infOrganization.structuralDivision">{{ item.infOrganization.structuralDivision}}</div>
                        <!-- <tui-tag
                            *ngFor="let tag of item.password"
                            class="tui-space_right-1"
                            [value]="tag"
                            [autoColor]="true"
                        ></tui-tag> -->
                    </td>
                    <td
                    *tuiCell="'balanceUnit'"
                    tuiTd
                >   
                    <div [class]="item.infOrganization.balanceUnit">{{ item.infOrganization.balanceUnit}}</div>
                    </td>
                    <td
                    *tuiCell="'manageLevel'"
                    tuiTd
                >   
                    <div [class]="item.infOrganization.manageLevel">{{ item.infOrganization.manageLevel}}</div>
                    </td>
                    <td
                    *tuiCell="'grade'"
                    tuiTd
                >   
                    <div [class]="item.additionalInf.grade">{{ item.additionalInf.grade}}</div>
                    </td>
                    <td
                    *tuiCell="'areOfWork'"
                    tuiTd
                >   
                    <div [class]="item.additionalInf.areOfWork">{{ item.additionalInf.areOfWork}}</div>
                    </td>
                    <td
                        *tuiCell="'actions'"
                        tuiTd
                    >   
                        <!-- <form [formGroup]="testValue">
                            <tui-checkbox
                            formControlName="testValue1"
                            class="tui-space_bottom-3"
                            ></tui-checkbox>
                        </form> -->
                        <button
                            tuiIconButton
                            appearance="flat"
                            size="s"
                            icon="tuiIconTrash"
                            title="Remove"
                            shape="rounded"
                            type="button"
                            class="remove"
                            (click)="delete(item.id, item)"
                        ></button>
                        <form>
                            <input type="checkbox" name="data">
                        </form>
                    </td>
                </tr>
            </tbody>
            <pagination-controls (pageChange)="p = $event"></pagination-controls>
        </table>    
    </div>
</div>
